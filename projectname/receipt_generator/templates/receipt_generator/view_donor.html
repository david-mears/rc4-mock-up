{% extends "base.html" %}

{% block header %}{% include "receipt_generator/header.html"%}{% endblock %}

{% block page_content %}
<h1>View donor '{{ donor.first_name }} {{ donor.last_name }}'</h1>

{% if success_message %}<p class="alert alert-success"><strong>{{ success_message }}</strong></p>{% endif %}
{% if error_message %}<p class="alert alert-warning"><strong>{{ error_message }}</strong></p>{% endif %}
<form>
    <fieldset disabled="disabled">
    {{ form.as_p }} 
    </fieldset>
</form>

<a class="btn btn-primary" href="{% url 'receipt_generator:edit_donor' donor.id %}">
    Edit this donor
</a>

{% if donations %}
    <p>All donations:</p>
    <table class="table table-striped">
        <thead>
            <tr>
                <th> Date </th>
                <th> Amount </th>
                <th> Currency </th>
            </tr>
        </thead>
        <tbody>
            {% for donation in donations %}
                <tr>
                    <td>
                        <a href="{% url 'receipt_generator:view_donation' donation.id %}">
                            {{ donation.date_received }}
                        </a>
                    </td>
                    <td>{{ donation.amount }}</td>
                    <td>{{ donation.currency }}</td>
                </tr>
            
            {% endfor %}
        </tbody>
    </table>
{% else %}
    <p>No donations are available.</p>
{% endif %}
{% endblock %}
